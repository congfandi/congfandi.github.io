<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Tips Membuat Rest Api Client Flutter - The Ngoding</title>

  <!-- Edit site and author settings in `_config.yml` to make the social details your own -->

    <meta content="The Ngoding" property="og:site_name">
  
    <meta content="Tips Membuat Rest Api Client Flutter" property="og:title">
  
  
    <meta content="article" property="og:type">
  
  
    <meta content="Sekedar ingin berbagi, dan bukan yang paling mampu, semoga dapat bermanfaat buat rekan-rekan pembaca sekalian.
" property="og:description">
  
  
    <meta content="http://localhost:4000/2020/08/22/tips-membuat-rest-api-client-flutter/" property="og:url">
  
  
    <meta content="2020-08-22T00:00:00+07:00" property="article:published_time">
    <meta content="http://localhost:4000/about/" property="article:author">
  
  
    <meta content="http://localhost:4000/assets/img/200822/cover.jpg" property="og:image">
  
  
    
  
  
    
    <meta content="Flutter" property="article:tag">
    
    <meta content="Tips" property="article:tag">
    
    <meta content="Rest Api" property="article:tag">
    
    <meta content="Developer" property="article:tag">
    
  

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@TheNgoding">
  
    <meta name="twitter:title" content="Tips Membuat Rest Api Client Flutter">
  
  
    <meta name="twitter:url" content="http://localhost:4000/2020/08/22/tips-membuat-rest-api-client-flutter/">
  
  
    <meta name="twitter:description" content="Sekedar ingin berbagi, dan bukan yang paling mampu, semoga dapat bermanfaat buat rekan-rekan pembaca sekalian.
">
  
  
    <meta name="twitter:image:src" content="http://localhost:4000/assets/img/200822/cover.jpg">
  

	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicon/apple-touch-icon-144x144.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700|Lato:300,400,700&display=swap" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
  <link rel="stylesheet" href="/assets/css/main.css">
  <script data-ad-client="ca-pub-4804520724232853" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>

<body>

  <div class="wrapper">
    <aside class="sidebar">
  <header>
    <div class="about">
      <div class="cover-author-image">
        <a href="http://localhost:4000/"><img src="http://localhost:4000/assets/img/logo.png" alt="The Ngoding"></a>
      </div>
      <div class="author-name">The Ngoding</div>
      <p>Sekedar ingin berbagi, dan bukan yang paling mampu, semoga dapat bermanfaat buat rekan-rekan pembaca sekalian.</p>
    </div>
    <div class="warning">
      <a href="http://localhost:4000">Home</a>
    </div>
    <div>
      <a href="http://localhost:4000/2010/08/15/daftar-isi/">Daftar Isi</a>
    </div>
    <div>
      <a href="http://localhost:4000/resume">Tentang Penulis</a>
    </div>
  </header> <!-- End Header -->
  <footer>
    <section class="contact">
      <h3 class="contact-title">Contact me</h3>
      <ul>
        
          <li><a href="https://twitter.com/TheNgoding" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
        
        
          <li><a href="https://facebook.com/congfandii" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
        
        
          <li class="github"><a href="http://github.com/congfandi" target="_blank"><i class="fa fa-github"></i></a></li>
        
        
          <li class="linkedin"><a href="https://in.linkedin.com/in/moh-supandi-49b717119/" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        
        
          <li class="email"><a href="mailto:congfandi@gmail.com"><i class="fa fa-envelope-o"></i></a></li>
        
      </ul>
    </section> <!-- End Section Contact -->
    <div class="copyright">
      <p>2020 &copy; The Ngoding</p>
    </div>
  </footer> <!-- End Footer -->
</aside> <!-- End Sidebar -->
<div class="content-box clearfix">
  <article class="article-page">
  <div class="page-content">
    
    <div class="page-cover-image">
      <figure>
        <img class="page-image" src=/assets/img/200822/cover.jpg alt="Tips Membuat Rest Api Client Flutter">
        
          <figcaption>Developer</figcaption>
        
      </figure>
    </div> <!-- End Page Cover Image -->
    
    <div class="wrap-content">
      <header class="header-page">
        <h1 class="page-title">Tips Membuat Rest Api Client Flutter</h1>
        <div class="page-date"><span>2020, Aug 22&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
      </header>
      <p>Hola Sobat Ngoding, Kali ini saya ingin berbagi tips yang bisa kalian jadikan refrensi untuk membangun aplikasi kalian. Tips ini saya gunakan disemua aplikasi yang sudah saya bangung dengan flutter, dan tips ini sangat membantu aku banget dalam tracking error dan tracking log serta maintanance yang sangat mudah.</p>

<h2 id="kebutuhan">Kebutuhan</h2>

<p>Hal dasar yang kita butuhkan untuk membuat Rest API Client ini adalah HTTP, kalian bisa lihat documentasinya dimari ya <a href="https://pub.dev/packages/http">Documentasi HTTP</a>.</p>

<h2 id="langkah-langkah">Langkah-Langkah</h2>

<ol>
  <li>
    <p>Pasang dulu lib HTTP nya ya</p>
  </li>
  <li>
    <p>Buat folder dibawah lib dengan nama <code class="language-plaintext highlighter-rouge">api</code> atau apapun yang kalian inginkan</p>
  </li>
  <li>Buat 3 file dengan nama
    <ul>
      <li>api_db.dart</li>
      <li>api_client.dart</li>
      <li>api.dart</li>
    </ul>
  </li>
  <li>Edit file <code class="language-plaintext highlighter-rouge">api.dart</code>,
Kita anggap kelas <em>Api.dart</em> adalah bapak dari kelas <em>ApiClient.dart</em> maka kita akan membuat abstrak kelas sebagai dasar kebutuhan dari kelas <em>ApiClient</em> nantinya, maka akan jadi seperti dibawah ini :</li>
</ol>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="s">'package:flutter/cupertino.dart'</span><span class="o">;</span>

<span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Api</span> <span class="o">{</span>
  <span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="kd">get</span><span class="o">(</span>
      <span class="o">{</span><span class="kt">String</span> <span class="n">url</span><span class="o">,</span>
      <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kt">String</span><span class="o">&gt;</span> <span class="n">headers</span><span class="o">,</span>
      <span class="n">VoidCallback</span> <span class="n">callback</span><span class="o">(</span>
          <span class="kt">bool</span> <span class="n">status</span><span class="o">,</span> <span class="kt">String</span> <span class="n">message</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kd">dynamic</span><span class="o">&gt;</span> <span class="n">response</span><span class="o">)});</span>

  <span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="n">post</span><span class="o">(</span>
      <span class="o">{</span><span class="kt">String</span> <span class="n">url</span><span class="o">,</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kt">String</span><span class="o">&gt;</span> <span class="n">headers</span><span class="o">,</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kt">String</span><span class="o">&gt;</span> <span class="n">body</span><span class="o">,</span>
        <span class="n">VoidCallback</span> <span class="n">callback</span><span class="o">(</span>
            <span class="kt">bool</span> <span class="n">status</span><span class="o">,</span> <span class="kt">String</span> <span class="n">message</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kd">dynamic</span><span class="o">&gt;</span> <span class="n">response</span><span class="o">)});</span>

  <span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="n">put</span><span class="o">(</span>
      <span class="o">{</span><span class="kt">String</span> <span class="n">url</span><span class="o">,</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kt">String</span><span class="o">&gt;</span> <span class="n">headers</span><span class="o">,</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kt">String</span><span class="o">&gt;</span> <span class="n">body</span><span class="o">,</span>
        <span class="n">VoidCallback</span> <span class="n">callback</span><span class="o">(</span>
            <span class="kt">bool</span> <span class="n">status</span><span class="o">,</span> <span class="kt">String</span> <span class="n">message</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kd">dynamic</span><span class="o">&gt;</span> <span class="n">response</span><span class="o">)});</span>

  <span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="n">delete</span><span class="o">(</span>
      <span class="o">{</span><span class="kt">String</span> <span class="n">url</span><span class="o">,</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kt">String</span><span class="o">&gt;</span> <span class="n">headers</span><span class="o">,</span>
        <span class="n">VoidCallback</span> <span class="n">callback</span><span class="o">(</span>
            <span class="kt">bool</span> <span class="n">status</span><span class="o">,</span> <span class="kt">String</span> <span class="n">message</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kd">dynamic</span><span class="o">&gt;</span> <span class="n">response</span><span class="o">)});</span>
<span class="o">}</span>

</code></pre></div></div>

<ol>
  <li>Edit file <code class="language-plaintext highlighter-rouge">api_client.dart</code> menjadi seperti ini guys :</li>
</ol>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="s">'dart:convert'</span><span class="o">;</span>

<span class="kn">import</span> <span class="s">'package:flutter/cupertino.dart'</span><span class="o">;</span>

<span class="kn">import</span> <span class="s">'api.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'api_db.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:http/http.dart'</span> <span class="k">as</span> <span class="n">http</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">ApiClient</span> <span class="kd">extends</span> <span class="n">Api</span> <span class="kd">implements</span> <span class="n">ApiDb</span> <span class="o">{</span>
  <span class="kd">static</span> <span class="n">ApiClient</span> <span class="n">_client</span> <span class="o">=</span> <span class="n">ApiClient</span><span class="o">.</span><span class="na">_singleTon</span><span class="o">();</span>

  <span class="kd">factory</span> <span class="n">ApiClient</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">_client</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="n">ApiClient</span><span class="o">.</span><span class="na">_singleTon</span><span class="o">();</span>

  <span class="n">laporkanError</span><span class="o">(</span><span class="kt">String</span> <span class="n">judulError</span><span class="o">,</span> <span class="kt">String</span> <span class="n">pesanError</span><span class="o">)</span> <span class="o">{</span>
<span class="c1">//    buat method untuk laporan</span>
  <span class="o">}</span>

  <span class="nd">@override</span>
  <span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="n">delete</span><span class="o">(</span>
      <span class="o">{</span><span class="kt">String</span> <span class="n">url</span><span class="o">,</span>
      <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kt">String</span><span class="o">&gt;</span> <span class="n">headers</span><span class="o">,</span>
      <span class="n">Function</span><span class="o">(</span><span class="kt">bool</span> <span class="n">status</span><span class="o">,</span> <span class="kt">String</span> <span class="n">message</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kd">dynamic</span><span class="o">&gt;</span> <span class="n">response</span><span class="o">)</span>
          <span class="n">callback</span><span class="o">})</span> <span class="n">async</span> <span class="o">{</span>
    <span class="n">http</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="nl">headers:</span> <span class="n">headers</span><span class="o">).</span><span class="na">then</span><span class="o">((</span><span class="n">res</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">callback</span><span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="na">statusCode</span> <span class="o">==</span> <span class="mi">200</span><span class="o">,</span>
          <span class="n">res</span><span class="o">.</span><span class="na">statusCode</span> <span class="o">==</span> <span class="mi">200</span> <span class="o">?</span> <span class="s">"Sukses"</span> <span class="o">:</span> <span class="s">"Gagal"</span><span class="o">,</span> <span class="n">jsonDecode</span><span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="na">body</span><span class="o">));</span>
      <span class="n">debugPrint</span><span class="o">(</span><span class="s">"print apa aja yang kamu butuhkan"</span><span class="o">);</span>
    <span class="o">}).</span><span class="na">catchError</span><span class="o">((</span><span class="n">err</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">callback</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="n">err</span><span class="o">.</span><span class="na">toString</span><span class="o">(),</span> <span class="kc">null</span><span class="o">);</span>
      <span class="n">laporkanError</span><span class="o">(</span><span class="s">"judulError"</span><span class="o">,</span> <span class="s">"pesanError"</span><span class="o">);</span>
    <span class="o">}).</span><span class="na">timeout</span><span class="o">(</span><span class="n">Duration</span><span class="o">(</span><span class="nl">seconds:</span> <span class="mi">30</span><span class="o">),</span> <span class="nl">onTimeout:</span> <span class="o">()</span> <span class="o">{</span>
      <span class="n">callback</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="s">"Timeout"</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
      <span class="n">laporkanError</span><span class="o">(</span><span class="s">"judulError"</span><span class="o">,</span> <span class="s">"pesanError"</span><span class="o">);</span>
    <span class="o">});</span>
  <span class="o">}</span>

  <span class="nd">@override</span>
  <span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="kd">get</span><span class="o">(</span>
      <span class="o">{</span><span class="kt">String</span> <span class="n">url</span><span class="o">,</span>
      <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kt">String</span><span class="o">&gt;</span> <span class="n">headers</span><span class="o">,</span>
      <span class="n">Function</span><span class="o">(</span><span class="kt">bool</span> <span class="n">status</span><span class="o">,</span> <span class="kt">String</span> <span class="n">message</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kd">dynamic</span><span class="o">&gt;</span> <span class="n">response</span><span class="o">)</span>
          <span class="n">callback</span><span class="o">})</span> <span class="n">async</span> <span class="o">{</span>
    <span class="n">http</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="nl">headers:</span> <span class="n">headers</span><span class="o">).</span><span class="na">then</span><span class="o">((</span><span class="n">res</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">callback</span><span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="na">statusCode</span> <span class="o">==</span> <span class="mi">200</span><span class="o">,</span>
          <span class="n">res</span><span class="o">.</span><span class="na">statusCode</span> <span class="o">==</span> <span class="mi">200</span> <span class="o">?</span> <span class="s">"Sukses"</span> <span class="o">:</span> <span class="s">"Gagal"</span><span class="o">,</span> <span class="n">jsonDecode</span><span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="na">body</span><span class="o">));</span>
    <span class="o">}).</span><span class="na">catchError</span><span class="o">((</span><span class="n">err</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">callback</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="n">err</span><span class="o">.</span><span class="na">toString</span><span class="o">(),</span> <span class="kc">null</span><span class="o">);</span>
    <span class="o">}).</span><span class="na">timeout</span><span class="o">(</span><span class="n">Duration</span><span class="o">(</span><span class="nl">seconds:</span> <span class="mi">30</span><span class="o">),</span> <span class="nl">onTimeout:</span> <span class="o">()</span> <span class="o">{</span>
      <span class="n">callback</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="s">"Timeout"</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="o">});</span>
  <span class="o">}</span>

  <span class="nd">@override</span>
  <span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="n">post</span><span class="o">(</span>
      <span class="o">{</span><span class="kt">String</span> <span class="n">url</span><span class="o">,</span>
      <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kt">String</span><span class="o">&gt;</span> <span class="n">headers</span><span class="o">,</span>
      <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kt">String</span><span class="o">&gt;</span> <span class="n">body</span><span class="o">,</span>
      <span class="n">Function</span><span class="o">(</span><span class="kt">bool</span> <span class="n">status</span><span class="o">,</span> <span class="kt">String</span> <span class="n">message</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kd">dynamic</span><span class="o">&gt;</span> <span class="n">response</span><span class="o">)</span>
          <span class="n">callback</span><span class="o">})</span> <span class="n">async</span> <span class="o">{</span>
    <span class="n">http</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="nl">headers:</span> <span class="n">headers</span><span class="o">,</span> <span class="nl">body:</span> <span class="n">body</span><span class="o">).</span><span class="na">then</span><span class="o">((</span><span class="n">res</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">callback</span><span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="na">statusCode</span> <span class="o">==</span> <span class="mi">200</span><span class="o">,</span>
          <span class="n">res</span><span class="o">.</span><span class="na">statusCode</span> <span class="o">==</span> <span class="mi">200</span> <span class="o">?</span> <span class="s">"Sukses"</span> <span class="o">:</span> <span class="s">"Gagal"</span><span class="o">,</span> <span class="n">jsonDecode</span><span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="na">body</span><span class="o">));</span>
    <span class="o">}).</span><span class="na">catchError</span><span class="o">((</span><span class="n">err</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">callback</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="n">err</span><span class="o">.</span><span class="na">toString</span><span class="o">(),</span> <span class="kc">null</span><span class="o">);</span>
    <span class="o">}).</span><span class="na">timeout</span><span class="o">(</span><span class="n">Duration</span><span class="o">(</span><span class="nl">seconds:</span> <span class="mi">30</span><span class="o">),</span> <span class="nl">onTimeout:</span> <span class="o">()</span> <span class="o">{</span>
      <span class="n">callback</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="s">"Timeout"</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="o">});</span>
  <span class="o">}</span>

  <span class="nd">@override</span>
  <span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="n">put</span><span class="o">(</span>
      <span class="o">{</span><span class="kt">String</span> <span class="n">url</span><span class="o">,</span>
      <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kt">String</span><span class="o">&gt;</span> <span class="n">headers</span><span class="o">,</span>
      <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kt">String</span><span class="o">&gt;</span> <span class="n">body</span><span class="o">,</span>
      <span class="n">Function</span><span class="o">(</span><span class="kt">bool</span> <span class="n">status</span><span class="o">,</span> <span class="kt">String</span> <span class="n">message</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kd">dynamic</span><span class="o">&gt;</span> <span class="n">response</span><span class="o">)</span>
          <span class="n">callback</span><span class="o">})</span> <span class="n">async</span> <span class="o">{</span>
    <span class="n">http</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="nl">headers:</span> <span class="n">headers</span><span class="o">,</span> <span class="nl">body:</span> <span class="n">body</span><span class="o">).</span><span class="na">then</span><span class="o">((</span><span class="n">res</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">callback</span><span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="na">statusCode</span> <span class="o">==</span> <span class="mi">200</span><span class="o">,</span>
          <span class="n">res</span><span class="o">.</span><span class="na">statusCode</span> <span class="o">==</span> <span class="mi">200</span> <span class="o">?</span> <span class="s">"Sukses"</span> <span class="o">:</span> <span class="s">"Gagal"</span><span class="o">,</span> <span class="n">jsonDecode</span><span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="na">body</span><span class="o">));</span>
    <span class="o">}).</span><span class="na">catchError</span><span class="o">((</span><span class="n">err</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">callback</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="n">err</span><span class="o">.</span><span class="na">toString</span><span class="o">(),</span> <span class="kc">null</span><span class="o">);</span>
    <span class="o">}).</span><span class="na">timeout</span><span class="o">(</span><span class="n">Duration</span><span class="o">(</span><span class="nl">seconds:</span> <span class="mi">30</span><span class="o">),</span> <span class="nl">onTimeout:</span> <span class="o">()</span> <span class="o">{</span>
      <span class="n">callback</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="s">"Timeout"</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="o">});</span>
  <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p><strong>Penjelasan</strong>
kode</p>
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">static</span> <span class="n">ApiClient</span> <span class="n">_client</span> <span class="o">=</span> <span class="n">ApiClient</span><span class="o">.</span><span class="na">_singleTon</span><span class="o">();</span>

  <span class="kd">factory</span> <span class="n">ApiClient</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">_client</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="n">ApiClient</span><span class="o">.</span><span class="na">_singleTon</span><span class="o">();</span>
</code></pre></div></div>

<p>adalah kode yang menunjukan bahwa kelas api client hanya boleh di inisialisasi sekali artinya <em>singleTon</em> metode ini akan membuat kelas apiclient hanya akan dipanggil dari 1 PID memory yang pertama kali intasiasi.</p>

<p>pada kode</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">laporkanError</span><span class="o">(</span><span class="kt">String</span> <span class="n">judulError</span><span class="o">,</span> <span class="kt">String</span> <span class="n">pesanError</span><span class="o">)</span> <span class="o">{</span>
<span class="c1">//    buat method untuk laporan</span>
  <span class="o">}</span>
</code></pre></div></div>
<p>digunakan untuk mentrack setiap ada error pada proses pemanggilan restApi ke server</p>

<p>kode yang lain  adalah kode yang akan kita gunakan untuk melakukan proses transaksi antara server dan client.</p>

<h2 id="penjelasan-method-then">Penjelasan Method .then</h2>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">.</span><span class="na">then</span><span class="o">((</span><span class="n">res</span><span class="o">){</span>

  <span class="o">})</span>
</code></pre></div></div>
<p>metode ini digunakan untk menangkap response sukses berkomunikasi dengan server, baik itu 404 atau 200</p>

<h2 id="penjelasan-method-catcherror">Penjelasan Method .catchError</h2>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">.</span><span class="na">catchError</span><span class="o">((</span><span class="n">err</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">callback</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="n">err</span><span class="o">.</span><span class="na">toString</span><span class="o">(),</span> <span class="kc">null</span><span class="o">);</span>
    <span class="o">})</span>
</code></pre></div></div>
<p>method ini akan menangkap semua error yang terjadi, baik karena error parsing atau karena error tidak dapat menghubungi server</p>

<h2 id="penjelasan-method-timeout">Penjelasan Method .timeOut</h2>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">.</span><span class="na">timeout</span><span class="o">(</span><span class="n">Duration</span><span class="o">(</span><span class="nl">seconds:</span> <span class="mi">30</span><span class="o">),</span> <span class="nl">onTimeout:</span> <span class="o">()</span> <span class="o">{</span>
      <span class="n">callback</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="s">"Timeout"</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="o">});</span>
</code></pre></div></div>

<p>Ini yang terakhir adalah error saat reques tidak dapat feedback dari server setelah 30detik, kalian bisa merubahnya sesuai kebutuhan kalian.</p>

<h1 id="menambahkan-base_url-dan-endpoint">Menambahkan BASE_URL dan EndPoint</h1>

<p>Untuk menambahkan BASE_URL dan EndPoint, temen2 buka dan edit file <code class="language-plaintext highlighter-rouge">api_db.dart</code> sebagai kumpulan dari semua endpoint yang kita miliki.
Lihatlah contoh dibawah:</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">ApiDb</span> <span class="o">{</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://contoh-url.com"</span><span class="o">;</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="n">LOGIN</span> <span class="o">=</span> <span class="n">BASE_URL</span><span class="o">+</span><span class="s">"/login"</span><span class="o">;</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="n">REGISTER</span> <span class="o">=</span> <span class="n">BASE_URL</span><span class="s">"/register"</span><span class="o">;</span>
<span class="c1">//  tambahkan sesuai kebutuhan temen2</span>
<span class="o">}</span>
</code></pre></div></div>

<h1 id="cara-penggunaan">Cara Penggunaan</h1>

<p>Untuk menggunakan kelas yang sudah kita buat tadi, temen-temen bisa menggunakan dengan cara seperti dibawah</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">final</span> <span class="n">ApiClient</span> <span class="n">_client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ApiClient</span><span class="o">();</span>
<span class="n">login</span><span class="o">(){</span>
    <span class="n">_clint</span><span class="o">.</span><span class="na">post</span><span class="o">(</span>
        <span class="nl">url:</span><span class="n">LOGIN</span><span class="o">,</span>
        <span class="nl">headers:</span><span class="o">{},</span>
        <span class="nl">body:</span><span class="o">{</span><span class="s">"username"</span><span class="o">:</span><span class="s">"thengoding"</span><span class="o">,</span><span class="s">"password"</span><span class="o">:</span><span class="s">"thengoding"</span><span class="o">},</span>
        <span class="nl">callback:</span><span class="o">(</span><span class="n">status</span><span class="o">,</span><span class="n">message</span><span class="o">,</span><span class="n">response</span><span class="o">){</span>
            <span class="k">if</span><span class="o">(</span><span class="n">status</span><span class="o">){</span>
                <span class="c1">//Menuju halama utama</span>
            <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                <span class="c1">//Tampilkan errornya kenapa</span>
            <span class="o">}</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Semua Return yang diperoleh akan dilempar ke parameter <code class="language-plaintext highlighter-rouge">callback</code> dimana yang dilemapr berupa</p>

<p>status : Boolean</p>

<p>message : String</p>

<p>response : Map&lt;String,dynamic&gt;</p>

<h1 id="kelebihan-menggunakan-tips-ini">Kelebihan Menggunakan Tips ini</h1>

<ol>
  <li>Mudah Maintanancenya</li>
  <li>Print Lognya cukup di satu kelas dan tidak perlu print log di tempat dia di instasiasi</li>
  <li>Memudahkan Tracking Api Error Reporting</li>
  <li>Menghindari Redundance Code</li>
</ol>

<p>Cukup sekian kawan kawan tips flutter dari saya, semoga bermanfaat :-) â€¦</p>

<p><br />
<br /></p>
<blockquote>
  <p>Kode itu ibarat Cinta, Butuh dimengerti dan dafahami.. asik asik<small> - Penulis</small></p>
</blockquote>

<p><b>Posted By : <a href="https://www.linkedin.com/in/moh-supandi-49b717119">Cong Fandi</a></b></p>

      <div class="page-footer">
        <div class="page-share">
          <a href="https://twitter.com/intent/tweet?text=Tips Membuat Rest Api Client Flutter&url=http://localhost:4000/2020/08/22/tips-membuat-rest-api-client-flutter/" title="Share on Twitter" rel="nofollow" target="_blank">Twitter</a>
          <a href="https://facebook.com/sharer.php?u=http://localhost:4000/2020/08/22/tips-membuat-rest-api-client-flutter/" title="Share on Facebook" rel="nofollow" target="_blank">Facebook</a>
        </div>
        <div class="page-tag">
          
            <a href="/tags#Flutter" class="tag">&#35; Flutter</a>
          
            <a href="/tags#Tips" class="tag">&#35; Tips</a>
          
            <a href="/tags#Rest Api" class="tag">&#35; Rest Api</a>
          
            <a href="/tags#Developer" class="tag">&#35; Developer</a>
          
        </div>
      </div>
      <section class="comment-area">
  <div class="comment-wrapper">
    
    <div id="disqus_thread" class="article-comments"></div>
    <script>
      (function() {
          var d = document, s = d.createElement('script');
          s.src = '//the-ngoding.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
  </div>
</section> <!-- End Comment Area -->

    </div> <!-- End Wrap Content -->
  </div> <!-- End Page Content -->
</article> <!-- End Article Page -->

</div>

  </div>
</body>
</html>

<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-analytics.js"></script>

<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyBAKNniWF4psdXPjmpGJ1B1ZurICgTy5sE",
    authDomain: "my-apps-2660a.firebaseapp.com",
    databaseURL: "https://my-apps-2660a.firebaseio.com",
    projectId: "my-apps-2660a",
    storageBucket: "my-apps-2660a.appspot.com",
    messagingSenderId: "261985294091",
    appId: "1:261985294091:web:8a5efcd13ab458a576b40e",
    measurementId: "G-PFCC72DX37"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-148964993-1">
</script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-148964993-1');
</script>
